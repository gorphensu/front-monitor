(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1124:function(t,e,a){var r=a(1125);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(10).default)("39f227a8",r,!0,{})},1125:function(t,e,a){(t.exports=a(9)(!1)).push([t.i,"\n.system-browser-container .chart-container[data-v-2ff75a30] {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n}\n.system-browser-container .chart-container .left-container[data-v-2ff75a30] {\n  width: 48%;\n}\n.system-browser-container .chart-container .right-container[data-v-2ff75a30] {\n  width: 48%;\n}\n",""])},1126:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),o=a(8),s=a(7),i=a(38),c=a(34),u=a(37),f=a.n(u);function l(t,e,a,r,n,o,s){try{var i=t[o](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,n)}function d(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var o=t.apply(e,a);function s(t){l(o,r,n,s,i,"next",t)}function i(t){l(o,r,n,s,i,"throw",t)}s(void 0)}))}}var h={name:"system-browser",components:{TimeBar:i.a,Loading:c.a},data:function(){return{scale:[{dataKey:"percent",min:0,formatter:".0%"}],originDatas:[],chartData:[],chartData2:[],labelConfig:["percent",{formatter:function(t,e){return e.point.item+" :  "+t}}],pieStyle:{stroke:"#fff",lineWidth:1},dateRange:[n()(n()().subtract(2,"months").format("YYYY/MM")).toDate(),n()(n()().subtract(-1,"months").format("YYYY/MM")).subtract(1,"days").toDate()],isShowLoading:!1,shortcuts:[{label:"当月",value:"".concat(n()().format("YYYY/MM/01"),"-").concat(n()().set("date",1).subtract(-1,"months").subtract(1,"days").format("YYYY/MM/01"))},{label:"最近三月",value:"".concat(n()().set("date",1).subtract(2,"months").format("YYYY/MM/01"),"-").concat(n()().set("date",1).subtract(-1,"months").subtract(1,"days").format("YYYY/MM/01"))},{label:"最近半年",value:"".concat(n()().set("date",1).subtract(5,"months").format("YYYY/MM/01"),"-").concat(n()().set("date",1).subtract(-1,"months").subtract(1,"days").format("YYYY/MM/01"))},{label:"最近一年",value:"".concat(n()().set("date",1).subtract(11,"months").format("YYYY/MM/01"),"-").concat(n()().set("date",1).subtract(-1,"months").subtract(1,"days").format("YYYY/MM/01"))}]}},methods:{disabledDate:function(t){var e=Date.now()-2592e6;return t&&t.valueOf()<e||t&&t.valueOf()>Date.now()},fetchData:function(){var t=this;return d(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.isShowLoading=!0,e.next=4,r={st:+n()(t.dateRange[0]),et:+n()(t.dateRange[1])},o.a.request({url:"project/".concat(Object(s.h)(),"/api/browser/gets"),method:"get",params:r});case 4:a=e.sent,t.isShowLoading=!1,t.originDatas=a.data,t.chartData=t.formatChartData(a.data),console.log(t.chartData),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),t.isShowLoading=!1,t.chartData=[];case 16:case"end":return e.stop()}var r}),e,null,[[0,11]])})))()},timeChange:function(t){var e=this;return d(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=t.dateRange,e.dateRange=r,e.fetchData();case 3:case"end":return a.stop()}}),a)})))()},formatChartData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};t.forEach((function(t){e[t.browser.toLowerCase()]||(e[t.browser.toLowerCase()]=1),e[t.browser.toLowerCase()]+=t.total_count}));var a=Object.keys(e).map((function(t){return{item:t,count:e[t]}})),r=(new f.a.View).source(a);return r.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),r.rows},versionDetailHandler:function(t){var e=t.data.point.item,a=this.originDatas.filter((function(t){return t.browser.toLowerCase()===e})).map((function(t){return{item:t.browser.toLowerCase()+" "+parseInt(t.browser_version),count:t.total_count,version:parseInt(t.browser_version)}})).sort((function(t,e){return t.version-e.version})),r=(new f.a.View).source(a);r.transform({type:"percent",field:"count",dimension:"item",as:"percent"}),this.chartData2=r.rows}},mounted:function(){var t=this;return d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchData();case 1:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){}},v=a(3);var m=function(t){a(1124)},p=Object(v.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container system-browser-container"},[a("Row",[a("Card",{attrs:{shadow:""}},[a("div",{staticClass:"filter-container"},[a("time-bar",{staticClass:"time-bar",attrs:{dateFormat:"yyyy/MM",datePickerType:"daterange",displayTypeItem:!1,disabledDate:t.disabledDate,shortcuts:t.shortcuts},on:{change:t.timeChange}})],1),t._v(" "),a("div",{staticClass:"chart-container"},[a("Loading",{attrs:{isSpinShow:t.isShowLoading}}),t._v(" "),a("div",{staticClass:"left-container"},[a("v-chart",{attrs:{"force-fit":!0,height:400,scale:t.scale,data:t.chartData}},[a("v-tooltip",{attrs:{showTitle:!1,"data-key":"item*percent"}}),t._v(" "),a("v-axis"),t._v(" "),a("v-legend",{attrs:{"data-key":"item"}}),t._v(" "),a("v-pie",{attrs:{position:"percent",color:"item","v-style":t.pieStyle,label:t.labelConfig,onClick:t.versionDetailHandler}}),t._v(" "),a("v-coord",{attrs:{type:"theta"}})],1)],1),t._v(" "),a("div",{staticClass:"right-container"},[a("v-chart",{attrs:{"force-fit":!0,height:400,scale:t.scale,data:t.chartData2}},[a("v-tooltip",{attrs:{showTitle:!1,"data-key":"item*percent"}}),t._v(" "),a("v-axis"),t._v(" "),a("v-legend",{attrs:{"data-key":"item"}}),t._v(" "),a("v-pie",{attrs:{position:"percent",color:"item","v-style":t.pieStyle,label:t.labelConfig}}),t._v(" "),a("v-coord",{attrs:{type:"theta"}})],1)],1)],1)])],1)],1)}),[],!1,m,"data-v-2ff75a30",null);e.default=p.exports}}]);